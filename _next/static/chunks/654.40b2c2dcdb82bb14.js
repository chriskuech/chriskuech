"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[654],{1654:(t,e,i)=>{i.r(e),i.d(e,{AnimationRunner:()=>y,default:()=>I});var s=i(7437),r=i(2265),n=i(8662),h=i(7776),a=i(5898),o=i(4605),l=i(3466);class d{get(t,e){return this.data[t*this.width+e]}set(t,e,i){this.data[t*this.width+e]=i}add(t){if("number"==typeof t)return this.add(d.ones(this.height,this.width).mul(t));let e=d.zeros(this.height,this.width);for(let i=0;i<this.height;i++)for(let s=0;s<this.width;s++)e.set(i,s,this.get(i,s)+t.get(i,s));return e}mul(t){if("number"==typeof t){let e=d.zeros(this.height,this.width);for(let i=0;i<this.height;i++)for(let s=0;s<this.width;s++)e.set(i,s,this.get(i,s)*t);return e}let e=d.zeros(this.height,t.width);for(let i=0;i<this.height;i++)for(let s=0;s<t.width;s++)for(let r=0;r<this.width;r++)e.set(i,s,e.get(i,s)+this.get(i,r)*t.get(r,s));return e}draw(t,e,i){let s=d.zeros(this.height,this.width);for(let r=0;r<i.height;r++)for(let n=0;n<i.width;n++)s.set(t+r,e+n,i.get(r,n));return s}static gaussian(t,e){let i=d.zeros(t,t),s=Math.floor(t/2),r=e*e;for(let e=0;e<t;e++)for(let n=0;n<t;n++){let t=e-s,h=n-s;i.set(e,n,Math.exp(-(t*t+h*h)/(2*r)))}return i}static zeros(t,e){return new d(new Float64Array(t*e),t,e)}static ones(t,e){return new d(new Float64Array(t*e).fill(1),t,e)}constructor(t,e,i){this.data=t,this.width=e,this.height=i}}class m{fade(t){return t*t*t*(t*(6*t-15)+10)}lerp(t,e,i){return e+t*(i-e)}grad(t,e,i,s){let r=15&t,n=r<8?e:i,h=r<4?i:12===r||14===r?e:s;return((1&r)==0?n:-n)+((2&r)==0?h:-h)}matrix(t,e,i){let s=d.zeros(t,e);for(let r=0;r<t;r++)for(let n=0;n<e;n++)s.set(r,n,this.noise(n/e,r/t,i));return s}noise(t,e,i){t*=this.intensity,e*=this.intensity,i*=this.intensity;let s=255&Math.floor(t),r=255&Math.floor(e),n=255&Math.floor(i);t-=Math.floor(t),e-=Math.floor(e),i-=Math.floor(i);let h=this.fade(t),a=this.fade(e),o=this.fade(i),l=this.permutation[s]+r,d=this.permutation[l]+n,m=this.permutation[l+1]+n,u=this.permutation[s+1]+r,w=this.permutation[u]+n,p=this.permutation[u+1]+n;return this.lerp(o,this.lerp(a,this.lerp(h,this.grad(this.permutation[d],t,e,i),this.grad(this.permutation[w],t-1,e,i)),this.lerp(h,this.grad(this.permutation[m],t,e-1,i),this.grad(this.permutation[p],t-1,e-1,i))),this.lerp(a,this.lerp(h,this.grad(this.permutation[d+1],t,e,i-1),this.grad(this.permutation[w+1],t-1,e,i-1)),this.lerp(h,this.grad(this.permutation[m+1],t,e-1,i-1),this.grad(this.permutation[p+1],t-1,e-1,i-1))))}constructor(t){this.intensity=t;let e=new Uint8ClampedArray(256);for(let t=0;t<256;t++)e[t]=t;for(let t=255;t>0;t--){let i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}this.permutation=new Uint8ClampedArray(512);for(let t=0;t<256;t++)this.permutation[t]=e[t],this.permutation[t+256]=e[t]}}var u=i(986),w=i.n(u);class p{setCoord(t,e,i){let s=this.getIndexFromUV(t,e),r=this.geometry.attributes.position,n=Math.PI/6;r.setXYZ(s,i*Math.sin(t*Math.PI*2+n),r.getY(s),i*Math.cos(t*Math.PI*2+n)),r.needsUpdate=!0}getCoord(t,e){let i=this.getIndexFromUV(t,e),s=this.geometry.attributes.position,r=s.getX(i),n=s.getZ(i);return Math.sqrt(r*r+n*n)}getIndexFromUV(t,e){w()(t>=0&&t<=1&&e>=0&&e<=1,"UV coordinates must be between 0 and 1");let i=Math.round(t*this.us),s=Math.round(e*this.vs);return w()(i%1==0&&s%1==0,"UV coordinates must be integers"),i+s*this.us}constructor(t,e,i,s){this.radius=t,this.length=e,this.us=i,this.vs=s,this.geometry=new n.fHI(t,t,e,i,s,!0),this.mesh=new n.Kj0(this.geometry,new n.Wid({color:0xffffff,wireframe:!0})),this.mesh.rotation.x=Math.PI/2}}let c=(t,e)=>Math.pow(t,e)/(Math.pow(t,e)+Math.pow(1-t,e)),f=(t,e,i)=>t+(e-t)*i,g=(t,e,i)=>f(255&t,255&e,i)<<16|f(t>>8&255,e>>8&255,i)<<8|f(t>>16&255,e>>16&255,i);class M{resize(){this.renderer.setSize(window.innerWidth,window.innerHeight),this.composer.setSize(window.innerWidth,window.innerHeight),this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix()}update(t){this.applyPerlinNoise(),this.updateLasers(t),this.maybeCreateLaser()}applyPerlinNoise(){w()(this.startTime,"startTime is not set");let t=(performance.now()-this.startTime)/1e3/300;for(let e=0;e<this.cylinderMesh.us;e++)for(let i=0;i<this.cylinderMesh.vs;i++){let[s,r]=[e/this.cylinderMesh.us,i/this.cylinderMesh.vs],n=this.perlin.large.noise(s,r,t)+5;this.cylinderMesh.setCoord(s,r,n)}}updateLasers(t){this.lasers=this.lasers.filter(e=>{let{mesh:i,light:s,speed:r}=e;return i.position.z-=r*t,s.position.copy(i.position),!(i.position.z<-90)||(this.scene.remove(i),this.scene.remove(s),!1)})}maybeCreateLaser(){if(!(.01>Math.random()))return;let t=Math.pow(c(Math.random(),10),2),e=10*t+.3,i=Math.floor(t*this.laserColors.length),s=this.laserColors[i],r=new n.fHI(.01,.01,e,8);r.rotateX(Math.PI/2);let h=2*Math.random()*Math.PI,a=new n.Kj0(r,new n.vBJ({color:g(0xaaaaaa,5592405,t)|s}));a.position.set(5*Math.cos(h),5*Math.sin(h),10);let o=new n.cek(s,e,50);o.position.copy(a.position),this.scene.add(a),this.scene.add(o),this.lasers.push({mesh:a,light:o,speed:10/Math.pow(t,2)})}start(){if(null!==this.animationFrameId)return;let t=e=>{if(null!==this.lastTime){let t=(e-this.lastTime)/1e3;this.update(t)}this.lastTime=e,this.composer.render(),this.animationFrameId=requestAnimationFrame(t)};this.startTime=performance.now(),this.animationFrameId=requestAnimationFrame(t)}stop(){w()(null!==this.animationFrameId,"animationFrameId is not null"),cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null,this.lastTime=null,this.startTime=null}constructor(t){this.animationFrameId=null,this.lastTime=null,this.startTime=null,this.lasers=[],this.laserColors=[0xff00ff,2271999,8388736,139],this.perlin={small:new m(.01),large:new m(10),extraLarge:new m(100)},this.scene=new n.xsS,this.scene.background=new n.Ilk(0),this.camera=new n.cPb(75,window.innerWidth/window.innerHeight,.1,1e3),this.camera.position.z=10,this.camera.position.y=4,this.camera.lookAt(new n.Pa4(0,-10,-10)),this.renderer=new h.CP7({canvas:t}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.cylinderMesh=new p(5,100,100,500),this.cylinderMesh.mesh.position.z=-40,this.scene.add(this.cylinderMesh.mesh);let e=new n.Mig(5440765,.1);this.scene.add(e),this.composer=new a.x(this.renderer),this.composer.addPass(new o.C(this.scene,this.camera)),this.composer.addPass(new l.m(new n.FM8(window.innerWidth,window.innerHeight).multiplyScalar(window.devicePixelRatio),4,.7,0)),this.composer.setSize(window.innerWidth,window.innerHeight),this.composer.setPixelRatio(window.devicePixelRatio),this.start()}}let y=()=>{let t=(0,r.useRef)(null);return(0,r.useLayoutEffect)(()=>{if(!t.current)return;let e=new M(t.current),i=()=>e.resize();return window.addEventListener("resize",i),e.start(),()=>{window.removeEventListener("resize",i),e.stop()}},[t.current]),(0,s.jsx)("canvas",{ref:t,style:{width:"100vw",height:"100vh"}})},I=y}}]);